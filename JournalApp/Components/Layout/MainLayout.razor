@inherits LayoutComponentBase
@using JournalApp.Services
@inject ThemeService Theme
@implements IDisposable

<!-- 
    CRITICAL: This div applies 'dark-theme' or 'light-theme' 
    to the ENTIRE application window.
-->
<div id="app-root" class="@Theme.ThemeClass" style="height: 100vh; width: 100vw; background-color: var(--bg-primary); color: var(--text-primary);">
    
    <LockScreen>
        <div class="main-wrapper">
            <NavMenu />

            <main class="content-area">
                @Body
            </main>
        </div>
    </LockScreen>

</div>

@code {
    protected override void OnInitialized()
    {
        Theme.OnThemeChanged += UpdateUI;
    }

    private void UpdateUI() => StateHasChanged();

    public void Dispose()
    {
        Theme.OnThemeChanged -= UpdateUI;
    }
}